# 第三题参考脚本

```

#题目要求
写一个脚本计算一下linux系统所有进程占用内存大小的和

#习题分析
本题有一个核心点，就是想办法把所有进程使用的内存统计出来，top或者ps命令都可以获取每一个进程的内存使用大小。统计完内存后，然后用for循环把所有内存相加，最终得到一个内存之和就是本题的答案

#参考答案
#!/bin/bash
#作者：小杨
#日期：2018/12/2
#版本：v0.1

sum=0
for mem in `ps aux |awk '{print $6}' |grep -v 'RSS'`
do
    sum=$[$sum+$mem]
done
echo "The total memory is $sum."

#答案解析
1、ps aux命令可以打印出所有进程的信息，其中第六列，也就是RSS那列就是内存使用大小，其中第一行RSS我们不需要，所以用grep -v去掉
2、我们拿到内存大小后，接下来就是做一个加法运算。这里用到了for循环，有多少个进程就循环多少次，每次循环，就是mem被赋予新的值（对应那个进程内存大小）。sum初始值设置为0，每循环一次，sum的值都要加上本次循环对应的mem的值，这样循环结束后sum的值就是所有内存的总大小